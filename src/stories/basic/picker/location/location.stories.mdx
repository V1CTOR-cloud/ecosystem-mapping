import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { useState } from "react";

import { withChakra } from "../../../../../.storybook/preview";
import Location from "/src/components/basic/picker/locationPicker/Location";
import { Location as LocationClass } from "/src/service/location";

<Meta
  title="Mapping App/Basic/Location/Location"
  component={Location}
  decorators={[withChakra]}
/>

# Location

This component is the core of UniqueLocation and MultiLocation component. It can seem that this component is the same
as UniqueLocation but in reality this component is used by UniqueLocation. This is the display of only one line of
location. It can be the first line in this case we display the smalls titles (Continent, Country, Region or City) otherwise
we simply display the fields without the smalls titles.

## Location with titles (First of the line)

<Canvas>
  <Story
    name="With titles"
    height="250px"
    inline={false}
    loaders={[
      async () => ({
        locations: await (LocationClass.formatLocations((await LocationClass.getAllLocations()).data)),
      }),
    ]}
    args={{
      index: 0,
    }}
  >
    {(args, { loaded: { locations } }) => {
      const [location, setLocation] = useState([{
        continent: null,
        country: null,
        region: null,
        city: null,
      }]);
      return <Location
        locationsState={[location, setLocation]}
        items={locations}
        {...args}
      />
    }}
  </Story>
</Canvas>

<ArgsTable story="With titles" />

## Location without titles (No the first of the line)

As you can see in the canvas, we have a cross that appear at the end of the line. This is to remove the location because
in theory, this will be the second or more, meaning that we should have at least one location before this one.

<Canvas>
  <Story
    name="Without titles"
    height="250px"
    inline={false}
    loaders={[
      async () => ({
        locations: await (LocationClass.formatLocations((await LocationClass.getAllLocations()).data)),
      }),
    ]}
    args={{
      index: 1,
    }}
  >
    {(args, { loaded: { locations } }) => {
      const [location, setLocation] = useState([{
        continent: null,
        country: null,
        region: null,
        city: null,
      }, {
        continent: null,
        country: null,
        region: null,
        city: null,
      }]);
      return <Location
        locationsState={[location, setLocation]}
        items={locations}
        {...args}
      />
    }}
  </Story>
</Canvas>

<ArgsTable story="Without titles" />